<!DOCTYPE html>
<html>
  <head>
    <title>Quiz</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="questions.css" />
  </head>
  <body>
    <div id="question"></div>

    <div class="timer" id="timer"></div>

    <div id="choices"></div>

    <button id="submit">تأكيد الإجابة</button>

    <div id="score"></div>

    <script>

      var questions = [
        {
          question: ".....",
          choices: [".......", ".......", "............."],
          answer: ".......",
        },
        {
          question: "Test",
          choices: ["4", "5", "6"],
          answer: "4",
        },
      ];

      var numQuestions = 30;

      var pointsPerAnswer = 2;

      var currentQuestion = 0;
      var score = 0;

      var displayedQuestions = [];

      function displayQuestion() {
        if (displayedQuestions.length === questions.length) {
          document.getElementById("question").innerHTML = "Quiz complete!";
          document.getElementById("choices").innerHTML = "";
          document.getElementById("submit").style.display = "none";
          document.getElementById("score").innerHTML = "Your score: " + score;
          return;
        }

        var randomQuestion;
        do {
          randomQuestion =
            questions[Math.floor(Math.random() * questions.length)];
        } while (displayedQuestions.indexOf(randomQuestion) !== -1);

        displayedQuestions.push(randomQuestion);

        document.getElementById("question").innerHTML = randomQuestion.question;

        var choicesHTML = "";
        for (var i = 0; i < randomQuestion.choices.length; i++) {
          choicesHTML +=
            "<input type='radio' name='choice' value='" +
            randomQuestion.choices[i] +
            "'>" +
            randomQuestion.choices[i] +
            "<br>";
        }
        document.getElementById("choices").innerHTML = choicesHTML;
      }

      function checkAnswer() {
        var selectedAnswer = document.querySelector(
          'input[name="choice"]:checked'
        ).value;

        var correctAnswer = displayedQuestions[currentQuestion].answer;

        if (selectedAnswer === correctAnswer) {
          score += pointsPerAnswer;
        }

        currentQuestion++;

        if (currentQuestion < numQuestions) {
          displayQuestion();
        } else {
          document.getElementById("question").innerHTML = "Quiz complete!";
          document.getElementById("choices").innerHTML = "";
          document.getElementById("submit").style.display = "none";
          document.getElementById("score").innerHTML = "Your score: " + score;
        }
      }

      displayQuestion();

      document.getElementById("submit").addEventListener("click", checkAnswer);
    </script>
  </body>
</html>
